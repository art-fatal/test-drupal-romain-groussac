<?php

/**
 * @file
 * Primary module hooks for SEO Block module.
 */

/**
 * Implements hook_help().
 */
function seo_block_help($route_name, \Drupal\Core\Routing\RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.seo_block':
      return '<p>' . t('Le module SEO Block affiche les derniers articles avec leur score SEO.') . '</p>';
  }
}

/**
 * Implements hook_theme().
 */
function seo_block_theme() {
  return [
    'seo_articles_block' => [
      'variables' => [
        'articles' => [],
      ],
    ],
    'seo_dashboard' => [
      'variables' => [
        'content' => [],
        'pagination' => [],
        'stats' => [],
      ],
    ],
  ];
}

/**
 * Implements hook_config_import_steps_alter().
 */
function seo_block_config_import_steps_alter(&$steps, $context) {
  if (isset($context['config_name']) && $context['config_name'] === 'seo_block.settings') {
    $steps[] = 'seo_block_cache_clear';
  }
}

/**
 * Implements hook_config_import_steps().
 */
function seo_block_config_import_steps() {
  return ['seo_block_cache_clear'];
}

/**
 * Clear cache when SEO Block settings are saved.
 */
function seo_block_cache_clear() {
  \Drupal::service('cache_tags.invalidator')->invalidateTags(['config:seo_block.settings']);
} 