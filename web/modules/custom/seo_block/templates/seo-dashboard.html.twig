{#
/**
 * @file
 * Template for SEO Dashboard.
 *
 * Available variables:
 * - content: Array of content items with SEO data.
 * - stats: Array of dashboard statistics.
 */
#}

<div class="seo-dashboard">
  {# Statistiques #}
  <div class="seo-dashboard__stats">
    <div class="stat-card">
      <div class="stat-card__icon">
        <i class="fas fa-file-lines"></i>
      </div>
      <div class="stat-card__content">
        <div class="stat-card__value">{{ stats.total_published }}</div>
        <div class="stat-card__label">Contenus publiés</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-card__icon">
        <i class="fas fa-pen-to-square"></i>
      </div>
      <div class="stat-card__content">
        <div class="stat-card__value">{{ stats.total_drafts }}</div>
        <div class="stat-card__label">Brouillons</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-card__icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="stat-card__content">
        <div class="stat-card__value">{{ stats.average_seo_score }}/100</div>
        <div class="stat-card__label">Score SEO moyen</div>
      </div>
    </div>

    <button class="button btn" id="clear-cache-btn" style="height: 50px; width: 100%;">
      <i class="fas fa-trash"></i>
      Purger le cache
    </button>
  </div>

  {# Liste des contenus #}
  <div class="seo-dashboard__content">
    <div class="content-header">
      <h2><i class="fas fa-list"></i> Liste des contenus</h2>
      <div class="content-filters">
        <div class="search-wrapper">
          <i class="fas fa-search search-icon"></i>
          <input type="text" id="content-search" placeholder="Rechercher un contenu..." class="form-control">
        </div>
        <select id="status-filter" class="form-control">
          <option value="">Tous les statuts</option>
          <option value="Publié">Publié</option>
          <option value="Brouillon">Brouillon</option>
        </select>
      </div>
    </div>

    <div class="content-table-wrapper">
      <table class="content-table">
        <thead>
          <tr>
            <th>Titre</th>
            <th>Type</th>
            <th>Auteur</th>
            <th>Date de création</th>
            <th>Dernière modification</th>
            <th>Statut</th>
            <th>Score SEO (/100)</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for item in content %}
            <tr class="content-row" data-status="{{ item.status }}" data-title="{{ item.title|lower }}">
              <td>
                <a href="{{ item.url }}" target="_blank" class="content-title">
                  {{ item.title }}
                </a>
              </td>
              <td>
                <span class="content-type">{{ item.type }}</span>
              </td>
              <td>{{ item.author }}</td>
              <td>{{ item.created|date('d/m/Y H:i') }}</td>
              <td>{{ item.changed|date('d/m/Y H:i') }}</td>
              <td>
                <span class="status-badge status-badge--{{ item.status|lower }} {% if item.status == 'Publié' %}status-published{% else %}status-draft{% endif %}">
                  {{ item.status }}
                </span>
              </td>
              <td>
                <div class="seo-score">
                  <span class="seo-score__value content-type">{{ item.seo_score }}</span>
                </div>
              </td>
              <td>
                <div class="content-actions">
                  <a href="{{ item.url }}" target="_blank" class="btn btn--small" title="Voir">
                    <i class="fas fa-eye"></i>
                  </a>
                  <a href="/node/{{ item.id }}/edit" class="btn btn--small" title="Modifier">
                    <i class="fas fa-pen-to-square"></i>
                  </a>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {# Notifications #}
  <div id="notifications" class="notifications"></div>
</div>
